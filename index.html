<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analytics Demo - Portfolio</title>
    <style>
      body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        overflow-x: hidden;
        color: #1b1919;
        text-align: center;
        padding: 20px 0;
      }

      /* Dynamic background with colorful bubbles */
      .background {
        position: fixed;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at top left,
            rgba(255, 80, 160, 0.9),
            transparent 55%
          ),
          radial-gradient(
            circle at bottom right,
            rgba(80, 180, 255, 0.9),
            transparent 55%
          ),
          radial-gradient(
            circle at top right,
            rgba(80, 255, 160, 0.9),
            transparent 55%
          ),
          radial-gradient(
            circle at bottom left,
            rgba(255, 240, 120, 0.9),
            transparent 55%
          );
        filter: blur(70px);
        animation: moveBubbles 15s infinite alternate ease-in-out;
        z-index: -1;
      }

      @keyframes moveBubbles {
        0% {
          transform: translate(0, 0) scale(1);
        }
        25% {
          transform: translate(-50px, 40px) scale(1.1);
        }
        50% {
          transform: translate(40px, -50px) scale(1.15);
        }
        75% {
          transform: translate(-30px, -20px) scale(1.05);
        }
        100% {
          transform: translate(50px, 50px) scale(1);
        }
      }

      .container {
        background: rgba(240, 222, 222, 0.15);
        border-radius: 20px;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
        backdrop-filter: blur(20px);
        margin: 20px;
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 20px;
        color: #242222;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        position: relative;
      }

      /* Live indicator */
      h1::after {
        content: "";
        display: inline-block;
        width: 10px;
        height: 10px;
        background: #4ade80;
        border-radius: 50%;
        margin-left: 10px;
        animation: blink 1.2s infinite;
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.3;
        }
      }

      .demo-badge {
        display: inline-block;
        background: linear-gradient(135deg, #ff8a8a, #ff6ad5, #9a7dff, #6ad5ff);
        padding: 8px 16px;
        border-radius: 25px;
        font-size: 0.9rem;
        font-weight: bold;
        margin-bottom: 20px;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .analytics-display {
        background: rgba(95, 93, 93, 0.164);
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
        text-align: left;
        text-align: left;
        font-family: "Courier New", monospace;
        font-size: 0.9rem;
        line-height: 1.6;
        border-left: 4px solid #ff6ad5;
      }

      .metric {
        display: flex;
        justify-content: space-between;
        margin: 8px 0;
        padding: 5px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .metric:last-child {
        border-bottom: none;
      }

      .label {
        color: #131212;
        font-weight: 500;
      }

      .value {
        color: #1d9612;
        font-weight: bold;
      }

      /* Heatmap Demo Styles */
      .heatmap-section {
        margin: 20px 0;
        text-align: center;
      }

      .heatmap-section h3 {
        color: #201f1f;
        margin-bottom: 15px;
        font-size: 1.1rem;
      }

      .demo-button {
        background: linear-gradient(135deg, #ff6ad5, #9a7dff);
        color: white;
        border: none;
        padding: 12px 24px;
        margin: 0 10px;
        border-radius: 25px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .demo-button:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(255, 106, 213, 0.4);
      }

      .demo-button:active {
        transform: scale(0.95);
      }

      .heatmap-display {
        background: rgba(88, 86, 86, 0.11);
        border-radius: 15px;
        padding: 15px;
        margin-top: 15px;
        font-size: 0.85rem;
      }

      .click-counter {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 10px;
        margin-bottom: 15px;
      }

      .counter-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 8px;
        border-radius: 8px;
        text-align: center;
      }

      .counter-label {
        display: block;
        font-size: 0.7rem;
        color: #021104;
        margin-bottom: 3px;
      }

      .counter-value {
        font-weight: bold;
        font-size: 1.1rem;
        color: #0c8608;
      }

      .click-positions {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 10px;
        text-align: left;
      }

      .click-item {
        font-size: 0.75rem;
        color: #178d07;
        margin: 3px 0;
        padding: 3px 8px;
        background: rgba(106, 213, 255, 0.1);
        border-radius: 5px;
        border-left: 2px solid #6ad5ff;
      }

      .click-ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.6);
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
      }

      @keyframes ripple {
        to {
          transform: scale(4);
          opacity: 0;
        }
      }

      .tecnicas {
        margin-top: 25px;
        font-size: 0.85rem;
        text-align: left;
      }

      .tecnicas h2 {
        font-size: 1.2rem;
        margin-bottom: 15px;
        text-align: center;
        color: #201f1f;
      }

      .tecnicas ul {
        list-style: none;
        padding: 0;
      }

      .tecnicas li {
        background: rgba(255, 255, 255, 0.1);
        margin: 8px 0;
        padding: 10px 15px;
        border-radius: 10px;
        border-left: 3px solid #6ad5ff;
        transition: all 0.3s ease;
      }

      .tecnicas li:hover {
        background: rgba(255, 255, 255, 0.25);
        transform: translateX(5px);
      }

      .deployment-info {
        margin-top: 25px;
        text-align: center;
        font-size: 0.9rem;
      }

      .deployment-box {
        background: rgba(20, 122, 7, 0.623);
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
      }
    </style>
  </head>
  <body>
    <div class="background"></div>
    <div class="container">
      <div class="demo-badge">
        PORTFOLIO DEMO - LLM DESIGN & DEPLOY (GPT+Claude)
      </div>
      <h1>Analytics Dashboard</h1>

      <div class="analytics-display" id="analytics">
        <div class="metric">
          <span class="label">IP Address:</span>
          <span class="value" id="ip">Detecting...</span>
        </div>
        <div class="metric">
          <span class="label">Location:</span>
          <span class="value" id="location">Loading...</span>
        </div>
        <div class="metric">
          <span class="label">Browser:</span>
          <span class="value" id="browser">Analyzing...</span>
        </div>
        <div class="metric">
          <span class="label">Language:</span>
          <span class="value" id="language">--</span>
        </div>
        <div class="metric">
          <span class="label">Resolution:</span>
          <span class="value" id="screen">--</span>
        </div>
        <div class="metric">
          <span class="label">Access Time:</span>
          <span class="value" id="timestamp">--</span>
        </div>
        <div class="metric">
          <span class="label">Session Time:</span>
          <span class="value" id="sessionTime">0s</span>
        </div>
      </div>

      <!-- Heatmap Tracking Demo -->
      <div class="heatmap-section">
        <h3>Heatmap Tracking Demo</h3>
        <button class="demo-button" id="button1">Button A</button>
        <button class="demo-button" id="button2">Button B</button>

        <div class="heatmap-display">
          <div class="click-counter">
            <div class="counter-item">
              <span class="counter-label">Button A Clicks:</span>
              <span class="counter-value" id="countA">0</span>
            </div>
            <div class="counter-item">
              <span class="counter-label">Button B Clicks:</span>
              <span class="counter-value" id="countB">0</span>
            </div>
            <div class="counter-item">
              <span class="counter-label">Total Clicks:</span>
              <span class="counter-value" id="totalClicks">0</span>
            </div>
          </div>

          <div class="click-positions" id="clickPositions">
            <strong>Recent Click History:</strong>
            <div
              id="clickList"
              style="max-height: 80px; overflow-y: auto; margin-top: 10px"
            >
              <em>Waiting for interaction...</em>
            </div>
          </div>
        </div>
      </div>

      <div class="tecnicas">
        <h2>Tech Stack & Features</h2>
        <ul>
          <li>
            <strong>Firebase Realtime Database:</strong> NoSQL real-time
            analytics storage
          </li>
          <li>
            <strong>REST API Integration:</strong> ipapi.co consumption for
            geolocation
          </li>
          <li>
            <strong>Responsive Web Design:</strong> Mobile-first with CSS
            Grid/Flexbox
          </li>
          <li>
            <strong>Vanilla JavaScript ES6+:</strong> Async/await, DOM
            manipulation
          </li>
          <li>
            <strong>CSS3 Advanced:</strong> Glassmorphism, keyframes,
            backdrop-filter
          </li>
          <li>
            <strong>Real-time Data Binding:</strong> Firebase onValue listeners
          </li>
          <li>
            <strong>Heatmap Tracking:</strong> Click tracking and user
            interaction analytics
          </li>
          <li>
            <strong>Geolocation Services:</strong> IP-based location detection
          </li>
          <li>
            <strong>Performance Optimization:</strong> Efficient DOM updates,
            memory management
          </li>
          <li><strong>Error Handling:</strong> Try/catch with API fallbacks</li>
        </ul>

        <div class="deployment-info">
          <div class="deployment-box">
            <strong>Code Available:</strong><br />
            <span style="color: #ffffff">GitHub: </span>
            <span style="color: #6ad5ff"
              >github.com/nardogod/mini-analytics</span
            ><br />
            <span style="color: #ffffff">Deploy: </span>
            <span style="color: #6ad5ff">Vercel</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      let sessionTime = 0;
      let clickCountA = 0;
      let clickCountB = 0;
      let totalClicks = 0;
      let clickHistory = [];

      // Client data collection function
      function collectData() {
        const browser = getBrowserInfo();
        const language = navigator.language || "en-US";
        const screen = `${window.screen.width}x${window.screen.height}`;
        const accessTime = new Date().toLocaleString("en-US");

        document.getElementById("browser").textContent = browser;
        document.getElementById("language").textContent = language;
        document.getElementById("screen").textContent = screen;
        document.getElementById("timestamp").textContent = accessTime;

        fetchIP();

        setInterval(() => {
          sessionTime++;
          const minutes = Math.floor(sessionTime / 60);
          const seconds = sessionTime % 60;
          const timeDisplay =
            minutes > 0 ? `${minutes}m ${seconds}s` : `${seconds}s`;
          document.getElementById("sessionTime").textContent = timeDisplay;
        }, 1000);
      }

      function getBrowserInfo() {
        const ua = navigator.userAgent;
        if (ua.includes("Chrome") && !ua.includes("Edge"))
          return "Google Chrome";
        if (ua.includes("Firefox")) return "Mozilla Firefox";
        if (ua.includes("Safari") && !ua.includes("Chrome")) return "Safari";
        if (ua.includes("Edge")) return "Microsoft Edge";
        if (ua.includes("Opera")) return "Opera";
        return "Unknown";
      }

      async function fetchIP() {
        try {
          const res = await fetch("https://ipapi.co/json/");
          const data = await res.json();
          document.getElementById("ip").textContent = data.ip;
          document.getElementById(
            "location"
          ).textContent = `${data.city}, ${data.country_name}`;
        } catch (e) {
          console.error("Error fetching IP:", e);
          document.getElementById("ip").textContent = "N/A";
          document.getElementById("location").textContent = "N/A";
        }
      }

      // Heatmap Tracking Functions
      function createRippleEffect(e) {
        const button = e.target;
        const rect = button.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;

        const ripple = document.createElement("span");
        ripple.className = "click-ripple";
        ripple.style.width = ripple.style.height = size + "px";
        ripple.style.left = x + "px";
        ripple.style.top = y + "px";

        button.appendChild(ripple);

        setTimeout(() => {
          ripple.remove();
        }, 600);
      }

      function trackClick(buttonId, e) {
        const timestamp = new Date().toLocaleTimeString("en-US");
        const buttonName = buttonId === "button1" ? "Button A" : "Button B";

        // Update counters
        if (buttonId === "button1") {
          clickCountA++;
          document.getElementById("countA").textContent = clickCountA;
        } else {
          clickCountB++;
          document.getElementById("countB").textContent = clickCountB;
        }

        totalClicks++;
        document.getElementById("totalClicks").textContent = totalClicks;

        // Add to history
        const clickData = {
          button: buttonName,
          time: timestamp,
          coordinates: `(${Math.round(e.clientX)}, ${Math.round(e.clientY)})`,
        };

        clickHistory.unshift(clickData);
        if (clickHistory.length > 5) clickHistory.pop(); // Keep only last 5

        updateClickList();
        createRippleEffect(e);
      }

      function updateClickList() {
        const clickList = document.getElementById("clickList");
        if (clickHistory.length === 0) {
          clickList.innerHTML = "<em>Waiting for interaction...</em>";
          return;
        }

        clickList.innerHTML = clickHistory
          .map(
            (click) =>
              `<div class="click-item">
            ${click.button} - ${click.time} - ${click.coordinates}
          </div>`
          )
          .join("");
      }

      // Initialize application
      collectData();

      // Event Listeners for Heatmap
      document.addEventListener("DOMContentLoaded", () => {
        // Heatmap tracking on buttons
        document.getElementById("button1").addEventListener("click", (e) => {
          trackClick("button1", e);
        });

        document.getElementById("button2").addEventListener("click", (e) => {
          trackClick("button2", e);
        });

        // Hover effects on tech stack items
        const techItems = document.querySelectorAll(".tecnicas li");
        techItems.forEach((item) => {
          item.addEventListener("mouseenter", () => {
            item.style.background = "rgba(255, 255, 255, 0.2)";
            item.style.transform = "translateX(5px)";
            item.style.transition = "all 0.3s ease";
          });

          item.addEventListener("mouseleave", () => {
            item.style.background = "rgba(255, 255, 255, 0.1)";
            item.style.transform = "translateX(0px)";
          });
        });
      });
    </script>
  </body>
</html>
